With a working project, we can finally get into implementing a CI/CD pipeline in GitLab.  We'll use it to automatically run `dotnet build` and `dotnet test.`  The pipeline configuration is defined in YAML, within the project itself.  So, we have to create a new file in the root of the repo and commit it to GitLab.
```powershell
PS C:\Tools\mycalculator> code .gitlab-ci.yml
```
  
```yaml
image: mcr.microsoft.com/dotnet/sdk:6.0

variables:
  project: "Calculator"

stages:
  - build
  - test

before_script:
  - "dotnet restore"

build:
  stage: build
  variables:
    build_path: "$project"
  script:
    - "cd $build_path"
    - "dotnet build"

test:
  stage: test
  variables:
    test_path: "$project.Tests"
  script:
    - "cd $test_path"
    - "dotnet test"
```

The GitLab documentation includes a [keyword reference](https://docs.gitlab.com/ee/ci/yaml/) for `.gitlab-ci.yml`.

`Image` defines the Docker container that we want the Runner to use.  Because this is a .NET project, Microsoft's image makes logical sense as it will already contain the .NET SDK.

`Stages` allows us to break the pipeline down into smaller parts, which helps identity where any failures occur.  E.g. did the pipeline failed because of a build failure, or because a test failure.

Within each stage, we have `script` options.  These define the actual commands that need to be run.  These are pretty much identical to what we ran manually in the last few lessons.  However, you can see that it supports the use of `variables`, which makes re-using these configurations a little easier.

Push this file to the repo and the pipeline will trigger.  The build stage will come first.

![](https://files.cdn.thinkific.com/file_uploads/584845/images/f0a/ef5/37a/ci-cd-build.png)

Followed by the test stage.

![](https://files.cdn.thinkific.com/file_uploads/584845/images/2c5/ac1/49b/ci-cd-test.png)

Hopefully everything will pass, and you'll see a lot of satisfying green ticks.